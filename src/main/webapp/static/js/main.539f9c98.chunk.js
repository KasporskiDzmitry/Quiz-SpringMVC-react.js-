(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{33:function(e,t,a){e.exports=a.p+"static/media/winner2.be6baeca.png"},34:function(e,t,a){e.exports=a(47)},39:function(e,t,a){},40:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),i=a.n(c),o=(a(39),a(40),a(41),a(2)),s=a(3),l=a(4),u=a(5),m=a(18),d=a(13),p=a(14),h=a(11),v=a(30),b=a.n(v),y=a(15),E=a(12),f={answeredQuestionsArray:[],topics:[]},O=[{id:0,name:"",score:0,isActive:!0},{id:1,name:"",score:0,isActive:!1}],g=function(){return{type:"RESET_STORE"}},j=Object(p.c)({questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ANSWERED_QUESTIONS_ARRAY":return Object(E.a)({},e,{answeredQuestionsArray:[].concat(Object(y.a)(e.answeredQuestionsArray),[t.payload])});case"LOAD_TOPICS":return Object(E.a)({},e,{topics:t.payload})}return e},players:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NAME":return[].concat(Object(y.a)(e.slice(0,t.payload.id)),[Object(E.a)({},e[t.payload.id],{name:t.payload.name})],Object(y.a)(e.slice(t.payload.id+1)));case"CHANGE_SCORE":return[].concat(Object(y.a)(e.slice(0,t.payload.id)),[Object(E.a)({},e[t.payload.id],{score:e[t.payload.id].score+t.payload.score})],Object(y.a)(e.slice(t.payload.id+1)));case"SWITCH_PLAYER":return e[0].isActive?[Object(E.a)({},e[0],{isActive:!1}),Object(E.a)({},e[1],{isActive:!0})]:[Object(E.a)({},e[0],{isActive:!0}),Object(E.a)({},e[1],{isActive:!1})];default:return e}}}),k=function(e,t){return"RESET_STORE"===t.type&&(e=void 0),j(e,t)},w=a(31),C=a(6),S=function(){return r.a.createElement("div",{className:"lds-spinner"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},A=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={question:null,userAnswer:"",showResult:!1,answerIsCorrect:!1},n.answer=n.answer.bind(Object(C.a)(n)),n.onInputChange=n.onInputChange.bind(Object(C.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e,t=this,a=new URLSearchParams(this.props.location.search),n={},r=Object(w.a)(a.entries());try{for(r.s();!(e=r.n()).done;){var c=e.value;n[c[0]]=+c[1]}}catch(i){r.e(i)}finally{r.f()}fetch("/getQuestion?topicId=".concat(n.topicId,"&value=").concat(n.value)).then((function(e){return e.json()})).then((function(e){return t.setState({question:e})})).catch((function(e){return console.log(e)}))}},{key:"onInputChange",value:function(e){e.preventDefault(),this.setState({userAnswer:e.target.value})}},{key:"answer",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.question,r=a.userAnswer,c=this.props,i=c.players,o=c.changeScore;this.setState({showResult:!0},(function(){r.toLowerCase()===n.answer.toLowerCase()&&t.setState({answerIsCorrect:!0},(function(){i.forEach((function(e){return e.isActive?o(e.id,n.value):null}))}))})),setTimeout((function(){t.props.switchPlayer(),t.props.history.push("/main")}),2500)}},{key:"render",value:function(){return this.state.question?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"question-wrapper"},r.a.createElement("div",{className:"question-image",style:{background:"url(http://localhost:8080/getImage?id=".concat(this.state.question.id,") no-repeat"),backgroundPosition:"center",backgroundSize:"contain"}}),r.a.createElement("div",{className:"question-text"},this.state.question.text),this.state.showResult?r.a.createElement("div",{className:"answer-result-wrapper"},r.a.createElement("div",{className:"answer-result-text"},this.state.answerIsCorrect?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{id:"right-icon",className:"fa fa-check-circle","aria-hidden":"true"}),r.a.createElement("span",null,"\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e")):r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{id:"wrong-icon",className:"fa fa-times-circle","aria-hidden":"true"}),r.a.createElement("span",null,"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e: "),r.a.createElement("span",null,this.state.question.answer)))):r.a.createElement("div",{className:"question-form"},r.a.createElement("form",{onSubmit:this.answer},r.a.createElement("input",{type:"text",onChange:this.onInputChange,autoFocus:!0,required:!0}),r.a.createElement("button",{type:"submit"},"\u041e\u0442\u0432\u0435\u0442"))))):r.a.createElement(S,null)}}]),a}(n.Component),N={changeScore:function(e,t){return{type:"CHANGE_SCORE",payload:{id:e,score:t}}},switchPlayer:function(){return{type:"SWITCH_PLAYER"}}},I=Object(h.b)((function(e){return{players:e.players}}),N)(A),_=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onSubmit=n.onSubmit.bind(Object(C.a)(n)),n.onInputChange=n.onInputChange.bind(Object(C.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.resetStore()}},{key:"onSubmit",value:function(e){e.preventDefault(),this.props.history.push("/main")}},{key:"onInputChange",value:function(e){e.preventDefault(),this.props.setName(e.target.id,e.target.value)}},{key:"render",value:function(){var e=this.props.players[0].name,t=this.props.players[1].name;return r.a.createElement("div",{className:"start_game"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("h1",null,"\u041d\u043e\u0432\u0430\u044f"),r.a.createElement("h1",null,"\u0418\u0433\u0440\u0430"),r.a.createElement("label",{htmlFor:"player_1_name"},"\u0418\u0433\u0440\u043e\u043a 1"),r.a.createElement("input",{type:"text",id:"0",value:e,onChange:this.onInputChange,maxLength:"10",required:!0}),r.a.createElement("label",{htmlFor:"player_2_name"},"\u0418\u0433\u0440\u043e\u043a 2"),r.a.createElement("input",{type:"text",id:"1",value:t,onChange:this.onInputChange,maxLength:"10",required:!0}),r.a.createElement("button",{type:"submit"},"\u0421\u0442\u0430\u0440\u0442")))}}]),a}(n.Component),R={setName:function(e,t){return{type:"SET_NAME",payload:{id:e,name:t}}},resetStore:g},T=Object(h.b)((function(e){return{players:e.players}}),R)(_),q=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={data:null,currentPage:0},n.createRows=n.createRows.bind(Object(C.a)(n)),n.onClick=n.onClick.bind(Object(C.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/getLeaders").then((function(e){return e.json()})).then((function(t){return e.setState({data:t})})).catch((function(e){return console.log(e)}))}},{key:"createRows",value:function(){var e=this.state,t=e.data,a=e.currentPage;if(t.length>0){for(var n=[],c=0,i=10;c<5;c++,i++)t[5*a+c]&&n.push(r.a.createElement("tr",{key:c},r.a.createElement("td",{key:i+1},5*a+c+1),r.a.createElement("td",{key:i+2},t[5*a+c].name),r.a.createElement("td",{key:i+3},t[5*a+c].datetime),r.a.createElement("td",{key:i+4},t[5*a+c].score)));return n}}},{key:"onClick",value:function(e){switch(e.target.id){case"newGame":this.props.history.push("/");break;case"prev":this.setState({currentPage:this.state.currentPage-1});break;case"next":this.setState({currentPage:this.state.currentPage+1})}}},{key:"render",value:function(){return this.state.data?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"leadersBoard"},r.a.createElement("button",{id:"newGame",onClick:this.onClick},"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"),r.a.createElement("table",{id:"ratingTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}},"\u2116"),r.a.createElement("th",{style:{width:"40%"}},"\u0418\u043c\u044f"),r.a.createElement("th",{style:{width:"30%"}},"\u0414\u0430\u0442\u0430"),r.a.createElement("th",{style:{width:"20%"}},"\u0421\u0447\u0435\u0442"))),r.a.createElement("tbody",null,this.createRows())),0===this.state.currentPage?null:r.a.createElement("button",{onClick:this.onClick,id:"prev"},"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f"),3===this.state.currentPage|!this.state.data[5*this.state.currentPage+5]?null:r.a.createElement("button",{onClick:this.onClick,id:"next",style:{float:"right"}},"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f"))):r.a.createElement(S,null)}}]),a}(n.Component),M=function(e){var t=e.data;return r.a.createElement("div",{className:t.isActive?"player active":"player",id:"player_".concat(t.id)},r.a.createElement("h2",null,t.name," - "),r.a.createElement("p",null,t.score))},P=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).createTable=n.createTable.bind(Object(C.a)(n)),n}return Object(s.a)(a,[{key:"createTable",value:function(){for(var e=this.props,t=e.answeredQuestionsArray,a=e.topics,n=e.addAnsweredQuestions,c=[],i=function(e){for(var i=[],o=function(c){0===c?i.push(r.a.createElement("td",{key:c,className:"topic"},a[e].topic)):i.push(r.a.createElement("td",{key:c,className:t.includes(e+""+c)?"cell disable-cell":"cell",onClick:function(){return n(e+""+c)}},r.a.createElement(m.b,{to:"/question?topicId=".concat(a[e].id,"&value=").concat(10*c)},10*c)))},s=0;s<6;s++)o(s);c.push(r.a.createElement("tr",{key:e},i))},o=0;o<5;o++)i(o);return c}},{key:"render",value:function(){return r.a.createElement("div",{className:"questionsBoard"},r.a.createElement("table",null,r.a.createElement("tbody",null,this.createTable())))}}]),a}(n.Component),x=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).el=document.createElement("div"),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.body.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.el)}},{key:"render",value:function(){var e=this.props.children;return i.a.createPortal(e,this.el)}}]),a}(n.Component),Q=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onClick=n.onClick.bind(Object(C.a)(n)),n}return Object(s.a)(a,[{key:"onClick",value:function(e){"overlay"===e.target.id&&this.props.onCancel()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.isOpen&&r.a.createElement(x,null,r.a.createElement("div",{className:"modalOverlay",id:"overlay",onClick:this.onClick},r.a.createElement("div",{className:"modalWindow"},r.a.createElement("div",{className:"modalBody"},this.props.children),r.a.createElement("div",{className:"modalFooter"},r.a.createElement("button",{onClick:this.props.onCancel},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement("button",{onClick:this.props.onSubmit},"OK"))))))}}]),a}(n.Component),D=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={modalIsOpen:!1,modalMessage:"",modalSubmitEvent:null},n.onClick=n.onClick.bind(Object(C.a)(n)),n.handleModalSubmit=n.handleModalSubmit.bind(Object(C.a)(n)),n.handleModalCancel=n.handleModalCancel.bind(Object(C.a)(n)),n}return Object(s.a)(a,[{key:"onClick",value:function(e){var t=this;switch(e.preventDefault(),e.target.id){case"newGameButton":this.setState({modalMessage:"\u041d\u0430\u0447\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0438\u0433\u0440\u0443?",modalSubmitEvent:function(){t.props.history.push("/")},modalIsOpen:!0});break;case"endGameButton":this.setState({modalMessage:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0438\u0433\u0440\u0443?",modalSubmitEvent:function(){t.props.history.push("/endGame")},modalIsOpen:!0})}}},{key:"handleModalSubmit",value:function(){var e=this;this.setState({modalIsOpen:!1},(function(){return e.state.modalSubmitEvent()}))}},{key:"handleModalCancel",value:function(){this.setState({modalIsOpen:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:this.props.className||"menu"},r.a.createElement("button",{onClick:this.onClick,id:"newGameButton"},"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"),r.a.createElement("button",{id:"leadersButton"},r.a.createElement(m.b,{to:"/leaders",target:"_blank"},"\u041b\u0438\u0434\u0435\u0440\u044b")),r.a.createElement("button",{onClick:this.onClick,id:"endGameButton"},"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0438\u0433\u0440\u0443"),r.a.createElement(Q,{isOpen:this.state.modalIsOpen,onCancel:this.handleModalCancel,onSubmit:this.handleModalSubmit},r.a.createElement("p",null,this.state.modalMessage)))}}]),a}(n.Component),G=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.topics,a=e.loadTopics,n=e.answeredQuestionsArray,r=e.history;0===t.length?fetch("/getTopics").then((function(e){return e.json()})).then((function(e){return a(e)})).catch((function(e){return console.log(e)})):25===n.length&&r.push("/endGame")}},{key:"render",value:function(){var e=this.props,t=e.topics,a=e.players,n=e.history,c=e.answeredQuestionsArray,i=e.addAnsweredQuestion;return 0===t.length?r.a.createElement(S,null):r.a.createElement("div",{className:"container main-wrapper"},r.a.createElement(M,{data:a[0]}),r.a.createElement(M,{data:a[1]}),r.a.createElement(P,{history:n,topics:t,answeredQuestionsArray:c,addAnsweredQuestions:i}),r.a.createElement(D,{history:n}))}}]),a}(n.Component),B={addAnsweredQuestion:function(e){return{type:"CHANGE_ANSWERED_QUESTIONS_ARRAY",payload:e}},loadTopics:function(e){return{type:"LOAD_TOPICS",payload:e}},resetStore:g},L=Object(h.b)((function(e){return{players:e.players,answeredQuestionsArray:e.questions.answeredQuestionsArray,topics:e.questions.topics}}),B)(G),W=a(33),F=a.n(W),H=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={winner:e.players[0].score>=e.players[1].score?e.players[0]:e.players[1]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.resetStore(),fetch("/saveResult",{method:"POST",body:JSON.stringify(this.state.winner),headers:{"Content-Type":"application/json"}}).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.winner,t=e.name,a=e.score;return r.a.createElement("div",{className:"container"},r.a.createElement(D,{className:"menu end_game_menu",history:this.props.history}),r.a.createElement("div",{className:"end_game"},r.a.createElement("div",{className:"winner_name"},t),r.a.createElement("div",{className:"winner_score"},a),r.a.createElement("figure",null,r.a.createElement("img",{src:F.a,alt:""}))))}}]),a}(n.Component),U={resetStore:g},Y=Object(h.b)((function(e){return{players:e.players}}),U)(H),J=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=Object(p.d)(k,Object(p.a)(b.a));return r.a.createElement(h.a,{store:e},r.a.createElement(m.a,null,r.a.createElement(d.a,{exact:!0,path:"/",component:T}),r.a.createElement(d.a,{exact:!0,path:"/main",component:L}),r.a.createElement(d.a,{exact:!0,path:"/question",component:I}),r.a.createElement(d.a,{exact:!0,path:"/endGame",component:Y}),r.a.createElement(d.a,{exact:!0,path:"/leaders",component:q})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.539f9c98.chunk.js.map